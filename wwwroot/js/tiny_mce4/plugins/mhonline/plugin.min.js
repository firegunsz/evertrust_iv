/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint unused:false */
/*global tinymce:true */

/**
 * Example plugin that adds a toolbar button and menu item.
 */
tinymce.PluginManager.requireLangPack('mhonline');
tinymce.PluginManager.add('mhonline', function(editor, url) {
	// Add a button that opens a window
	editor.addButton('mhonline', {
		image : url + '/img/mhonline.png',
		tooltip: 'mhonline.online_edm_desc',
		onclick: function() {
			var se = editor.selection;
			//not in link
			if (editor.dom.getParent(se.getNode(), 'A'))
				return;
					
			if (se.isCollapsed()){// No selection
			    editor.execCommand('mceInsertContent', false, '<a href="mailhunteronlineedm.aspx">' + tinymce.translate('mhonline.online_edm_desc') + '</a>');
			}else{
			    editor.execCommand('mceInsertContent', false, '<a href="mailhunteronlineedm.aspx">' + se.getContent() + '</a>');
			}
		}
	});
});