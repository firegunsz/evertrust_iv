/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/*jshint unused:false */
/*global tinymce:true */

/**
 * Example plugin that adds a toolbar button and menu item.
 */
tinymce.PluginManager.requireLangPack('mhcancel');
tinymce.PluginManager.add('mhcancel', function(editor, url) {
	// Add a button that opens a window
	editor.addButton('mhcancel', {
		image : url + '/img/mhcancel.png',
		tooltip: 'mhcancel.desc',
		onclick: function() {
			var se = editor.selection;
			//not in link
			if (editor.dom.getParent(se.getNode(), 'A'))
				return;
					
			if (se.isCollapsed()){// No selection
				editor.execCommand('mceInsertContent', false, '<a href="mailhuntercanceledm.aspx">' + tinymce.translate('mhcancel.desc') + '</a>');
			}else{
				editor.execCommand('mceInsertContent', false, '<a href="mailhuntercanceledm.aspx">' + se.getContent() + '</a>');
			}
		}
	});
});